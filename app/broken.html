<!DOCTYPE html>
<html>
<head>
	<title>Broke</title>
	<!-- build:css styles/broken.css -->
	<link rel="stylesheet" href="styles/broken.css">
	<!-- endbuild -->
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div id="navbar" class="navbar-collapse collapse">
			<form class="navbar-form navbar-right" role="form">
				<button type="button" class="btn btn-success" data-toggle="modal" data-target="#solutionModal">I know!</button>
			</form>
		</div><!--/.navbar-collapse -->
	</div>
</nav>

<!-- Modal -->
<div class="modal fade solution-modal" id="solutionModal" tabindex="-1" role="dialog" aria-labelledby="solutionModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="solutionModalLabel">Solution</h4>
			</div>
			<form id="solution-form" action="checkResult">
			<div class="modal-body">
				<div class="form-group">
					<input type="text" id="solution" placeholder="Solution" required class="form-control">
				</div>
			</div>
			<div class="modal-footer">
				<input  type="submit" value="Got it" id="submit-result" class="btn btn-success" />
			</div>
			</form>
		</div>
	</div>
</div>

<div class="container cubes">
	<div class="row row-even">
		<div class="col-md-1">Pas ça...</div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-odd">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-even">
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1 maumauche">vidange</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-odd">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-even">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-odd">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Toujours pas</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-even">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1 maumauche">pizza</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-odd">
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
	<div class="row row-even">
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1">Non, pas ça</div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
		<div class="col-md-1"></div>
	</div>
</div>
		<!-- build:js scripts/broken-vendor.js -->
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/cryptojslib/components/core-min.js"></script>
        <!-- endbuild -->

        <!-- build:js scripts/broken-plugins.js -->
        <script src="scripts/libs/jgravity.min.js"></script>
        <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/transition.js"></script>
        <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tooltip.js"></script>
        <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/modal.js"></script>
        <script src="bower_components/cryptojslib/components/sha1-min.js"></script>
        <!-- endbuild -->

        <script type="text/javascript">
        	$(function() {

        		$('body').jGravity({
        			target: '.cubes div',
        			weight: 8,
        			depth: 1,
        			drag: true
        		});
        		var $solution= $('#solution');
        		$('#solutionModal').on('shown.bs.modal', function() {
        			$solution.focus();
        		});

        		$('#solution-form').submit(function(e) {
        			e.preventDefault();

        			var solution= $solution.val();
        			var hash = CryptoJS.SHA1(solution).toString();
        			if (hash === '174aa7a1814ea2cbf06c08c3f9d107e21dc8c74c'
        				|| hash === '0754f90c66dd93e3754a5c002351d04de1365e4d'){
        				localStorage.setItem('enigm3', true);
        			window.location.href = 'index.html';
        		} else {
        			wrongAnswerStyle();
        		}
        		return false;
        	});

        		var wrongAnswerStyle= function() {
        			var anims= ['hinge', 'tada', 'bounce'];
        			var rand= Math.floor((Math.random() * 5));
        			if (rand === 3) {
        				window.location.href = 'fail.html?back=broken.html';	
        			} else {
        				var animIndice= Math.floor((Math.random() * anims.length));
        				var anim= anims[animIndice];
        				$solution.parent().addClass('has-error');
        				$solution.addClass('animated ' + anim);
        				setTimeout(function() {
        					$solution.removeClass('animated ' + anim);
        					$solution.parent().removeClass('has-error');
        				}, 2000);
        			}
        		};
        	});
		</script>

</body>
</html>